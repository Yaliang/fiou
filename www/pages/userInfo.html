<title>FIOU</title>
<pageid>userInfo</pageid>

<header>
	<h1>FIOU</h1>
	<a class="header-btn" href='#' data-href='' data-nav='back'>
		<span class="glyphicon glyphicon-chevron-left" data-nav='back' aria-hidden="true"></span>Back
	</a>
</header>
<main>
	<div class="panel panel-default small" style="display: none">
		<div class="panel-heading">Userid</div>
		<div class="panel-body" id="other-account-userid">
		</div>
	</div>
	<div class="panel panel-default small">
		<div class="panel-heading">Username</div>
		<div class="panel-body" id="other-account-username">
		</div>
	</div>
	<button type="button" class="btn btn-primary btn-block" id="connect-btn" data-enhance="false">
		<span class="small" style="line-height:2">Add Connection</span>
	</button>
</main>
<contentAttrOverscroll>true</contentAttrOverscroll>
<footer>
	<script type="text/javascript">
		console.log("run")

		if (ajaxloader.callback) {
			user.autologin({
				dest: "@current"
			})
		} else {
			user.autologin()
		}
		

		userInfoJS = {
			loadUserById : function(userid) {
				$("#other-account-userid").html(userid)
				user.acquireUserNameById(userid, {
					callback: function(username) {
						$("#other-account-username").html(username)
					}
				})
				$("#connect-btn").html("Add Connection")
				$("#connect-btn").bind("click", userid, function(event) {
					$("#connect-btn").unbind("click")
					$("#connect-btn").attr("disabled", "disabled")
					$("#connect-btn").html("Working...")
					user.addConnect(event.data, {
						callback: function() {
							$("#connect-btn").attr("disabled", "")
							$("#connect-btn").html("Done")
							$("#connect-btn").bind("click", function(event) {
								$("#connect-btn").unbind("click")
								pt.loadPage("home")
							})
						}
					})
				})
			}
		}

		$(document).on("pagebeforeshow", "#userInfo", function() {
			console.log("show")
		})

	</script>
</footer>